{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Teste%20AWS/aws-monitoring-platform/src/hooks/useAwsCredentials.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\n\nexport interface AwsCredential {\n  id: string;\n  name: string;\n  accountId?: string;\n  accessKeyId: string;\n  secretAccessKey: string;\n  region: string;\n}\n\nexport interface UseAwsCredentialsResult {\n  credentials: AwsCredential[];\n  selectedCredential: AwsCredential | null;\n  selectCredential: (id: string) => void;\n  addCredential: (credential: Omit<AwsCredential, 'id'>) => Promise<void>;\n  updateCredential: (id: string, data: Partial<Omit<AwsCredential, 'id'>>) => Promise<void>;\n  deleteCredential: (id: string) => Promise<void>;\n  loading: boolean;\n  isLoading: boolean; // Alias for loading - needed for compatibility\n  error: string | null;\n  refresh: () => Promise<void>;\n}\n\nexport function useAwsCredentials(): UseAwsCredentialsResult {\n  const [credentials, setCredentials] = useState<AwsCredential[]>([]);\n  const [selectedCredentialId, setSelectedCredentialId] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Function to fetch credentials from the API\n  const fetchCredentials = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await fetch('/api/aws/credentials');\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch credentials: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      setCredentials(data);\n      \n      // If we have credentials but none selected, select the first one\n      if (data.length > 0 && !selectedCredentialId) {\n        setSelectedCredentialId(data[0].id);\n        // Save to localStorage\n        localStorage.setItem('selectedAwsCredentialId', data[0].id);\n      }\n      \n      return data;\n    } catch (err) {\n      setError(`Error fetching credentials: ${err instanceof Error ? err.message : String(err)}`);\n      return [];\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Function to select a credential\n  const selectCredential = (id: string) => {\n    setSelectedCredentialId(id);\n    localStorage.setItem('selectedAwsCredentialId', id);\n  };\n\n  // Function to add a new credential\n  const addCredential = async (credential: Omit<AwsCredential, 'id'>) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await fetch('/api/aws/credentials', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(credential),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to add credential: ${response.status}`);\n      }\n      \n      await fetchCredentials();\n    } catch (err) {\n      setError(`Error adding credential: ${err instanceof Error ? err.message : String(err)}`);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Function to update an existing credential\n  const updateCredential = async (id: string, data: Partial<Omit<AwsCredential, 'id'>>) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await fetch(`/api/aws/credentials/${id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to update credential: ${response.status}`);\n      }\n      \n      await fetchCredentials();\n    } catch (err) {\n      setError(`Error updating credential: ${err instanceof Error ? err.message : String(err)}`);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Function to delete a credential\n  const deleteCredential = async (id: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await fetch(`/api/aws/credentials/${id}`, {\n        method: 'DELETE',\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Failed to delete credential: ${response.status}`);\n      }\n      \n      // If we delete the selected credential, select another one\n      if (id === selectedCredentialId) {\n        const remainingCredentials = credentials.filter(c => c.id !== id);\n        if (remainingCredentials.length > 0) {\n          selectCredential(remainingCredentials[0].id);\n        } else {\n          setSelectedCredentialId(null);\n          localStorage.removeItem('selectedAwsCredentialId');\n        }\n      }\n      \n      await fetchCredentials();\n    } catch (err) {\n      setError(`Error deleting credential: ${err instanceof Error ? err.message : String(err)}`);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load credentials on mount\n  useEffect(() => {\n    // Try to restore selected credential from localStorage\n    const savedCredentialId = localStorage.getItem('selectedAwsCredentialId');\n    if (savedCredentialId) {\n      setSelectedCredentialId(savedCredentialId);\n    }\n    \n    fetchCredentials();\n  }, []);\n\n  // Find the selected credential object\n  const selectedCredential = credentials.find(c => c.id === selectedCredentialId) || null;\n\n  return {\n    credentials,\n    selectedCredential,\n    selectCredential,\n    addCredential,\n    updateCredential,\n    deleteCredential,\n    loading,\n    isLoading: loading, // Alias for loading\n    error,\n    refresh: fetchCredentials,\n  };\n} "],"names":[],"mappings":";;;AAEA;AAFA;;AA0BO,SAAS;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB,EAAE;IAClE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChF,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,6CAA6C;IAC7C,MAAM,mBAAmB;QACvB,IAAI;YACF,WAAW;YACX,SAAS;YACT,MAAM,WAAW,MAAM,MAAM;YAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,SAAS,MAAM,EAAE;YACnE;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,eAAe;YAEf,iEAAiE;YACjE,IAAI,KAAK,MAAM,GAAG,KAAK,CAAC,sBAAsB;gBAC5C,wBAAwB,IAAI,CAAC,EAAE,CAAC,EAAE;gBAClC,uBAAuB;gBACvB,aAAa,OAAO,CAAC,2BAA2B,IAAI,CAAC,EAAE,CAAC,EAAE;YAC5D;YAEA,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,SAAS,CAAC,4BAA4B,EAAE,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO,MAAM;YAC1F,OAAO,EAAE;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,kCAAkC;IAClC,MAAM,mBAAmB,CAAC;QACxB,wBAAwB;QACxB,aAAa,OAAO,CAAC,2BAA2B;IAClD;IAEA,mCAAmC;IACnC,MAAM,gBAAgB,OAAO;QAC3B,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,WAAW,MAAM,MAAM,wBAAwB;gBACnD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,SAAS,MAAM,EAAE;YAChE;YAEA,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,SAAS,CAAC,yBAAyB,EAAE,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO,MAAM;YACvF,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,4CAA4C;IAC5C,MAAM,mBAAmB,OAAO,IAAY;QAC1C,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,WAAW,MAAM,MAAM,CAAC,qBAAqB,EAAE,IAAI,EAAE;gBACzD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,SAAS,MAAM,EAAE;YACnE;YAEA,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,SAAS,CAAC,2BAA2B,EAAE,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO,MAAM;YACzF,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,kCAAkC;IAClC,MAAM,mBAAmB,OAAO;QAC9B,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,WAAW,MAAM,MAAM,CAAC,qBAAqB,EAAE,IAAI,EAAE;gBACzD,QAAQ;YACV;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,SAAS,MAAM,EAAE;YACnE;YAEA,2DAA2D;YAC3D,IAAI,OAAO,sBAAsB;gBAC/B,MAAM,uBAAuB,YAAY,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;gBAC9D,IAAI,qBAAqB,MAAM,GAAG,GAAG;oBACnC,iBAAiB,oBAAoB,CAAC,EAAE,CAAC,EAAE;gBAC7C,OAAO;oBACL,wBAAwB;oBACxB,aAAa,UAAU,CAAC;gBAC1B;YACF;YAEA,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,SAAS,CAAC,2BAA2B,EAAE,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO,MAAM;YACzF,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,4BAA4B;IAC5B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,uDAAuD;QACvD,MAAM,oBAAoB,aAAa,OAAO,CAAC;QAC/C,IAAI,mBAAmB;YACrB,wBAAwB;QAC1B;QAEA;IACF,GAAG,EAAE;IAEL,sCAAsC;IACtC,MAAM,qBAAqB,YAAY,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,yBAAyB;IAEnF,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA,WAAW;QACX;QACA,SAAS;IACX;AACF","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Teste%20AWS/aws-monitoring-platform/src/components/aws/CredentialSelector.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useAwsCredentials } from \"@/hooks/useAwsCredentials\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function CredentialSelector() {\r\n  const { credentials, selectedCredential, selectCredential, loading } = useAwsCredentials();\r\n  const router = useRouter();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 mb-6 flex items-center space-x-2\">\r\n        <span className=\"text-gray-700\">Carregando credenciais...</span>\r\n        <div className=\"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-indigo-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (credentials.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-sm p-4 mb-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <span className=\"text-gray-700\">Nenhuma credencial AWS encontrada</span>\r\n          <button\r\n            onClick={() => router.push(\"/dashboard/credentials\")}\r\n            className=\"px-3 py-1 text-sm text-white bg-indigo-600 rounded-md hover:bg-indigo-700\"\r\n          >\r\n            Adicionar Credencial\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-sm p-4 mb-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n        <label htmlFor=\"credential-selector\" className=\"block text-sm font-medium text-gray-700 mb-2 sm:mb-0\">\r\n          Selecionar Credencial AWS:\r\n        </label>\r\n        <div className=\"flex-1 sm:ml-4 max-w-md\">\r\n          <select\r\n            id=\"credential-selector\"\r\n            value={selectedCredential?.id || \"\"}\r\n            onChange={(e) => selectCredential(e.target.value)}\r\n            className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n          >\r\n            <option value=\"\" disabled>\r\n              Selecione uma credencial\r\n            </option>\r\n            {credentials.map((cred) => (\r\n              <option key={cred.id} value={cred.id}>\r\n                {cred.name} ({cred.region})\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,WAAW,EAAE,kBAAkB,EAAE,gBAAgB,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,oBAAiB,AAAD;IACvF,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAK,WAAU;8BAAgB;;;;;;8BAChC,8OAAC;oBAAI,WAAU;;;;;;;;;;;;IAGrB;IAEA,IAAI,YAAY,MAAM,KAAK,GAAG;QAC5B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAgB;;;;;;kCAChC,8OAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAM,SAAQ;oBAAsB,WAAU;8BAAuD;;;;;;8BAGtG,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBACC,IAAG;wBACH,OAAO,oBAAoB,MAAM;wBACjC,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wBAChD,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;gCAAG,QAAQ;0CAAC;;;;;;4BAGzB,YAAY,GAAG,CAAC,CAAC,qBAChB,8OAAC;oCAAqB,OAAO,KAAK,EAAE;;wCACjC,KAAK,IAAI;wCAAC;wCAAG,KAAK,MAAM;wCAAC;;mCADf,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlC","debugId":null}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file://E%3A/Teste%20AWS/aws-monitoring-platform/src/app/dashboard/security-analysis/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useAwsCredentials } from \"@/hooks/useAwsCredentials\";\r\nimport { motion } from \"framer-motion\";\r\nimport CredentialSelector from \"@/components/aws/CredentialSelector\";\r\nimport { Shield, AlertTriangle } from \"lucide-react\";\r\n\r\ninterface SecurityCheck {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  status: \"passed\" | \"failed\" | \"warning\" | \"info\";\r\n  resourceType: string;\r\n  resourceId?: string;\r\n  impact: \"critical\" | \"high\" | \"medium\" | \"low\";\r\n  recommendation: string;\r\n}\r\n\r\nexport default function SecurityAnalysisPage() {\r\n  const { selectedCredential } = useAwsCredentials();\r\n  const [securityChecks, setSecurityChecks] = useState<SecurityCheck[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [backgroundLoading, setBackgroundLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [scanning, setScanning] = useState(false);\r\n  const [scanProgress, setScanProgress] = useState(0);\r\n  const [filterStatus, setFilterStatus] = useState<string | null>(null);\r\n  const [filterImpact, setFilterImpact] = useState<string | null>(null);\r\n  const [lastCredentialId, setLastCredentialId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Tenta restaurar dados do cache ao iniciar\r\n    if (!selectedCredential) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Verificar se já temos dados no localStorage\r\n      const securityCache = localStorage.getItem('securityChecks');\r\n      const cachedCredentialId = localStorage.getItem('securityLastCredentialId');\r\n\r\n      if (securityCache && cachedCredentialId === selectedCredential.id) {\r\n        // Usar dados do cache\r\n        const parsedChecks = JSON.parse(securityCache);\r\n        setSecurityChecks(parsedChecks);\r\n        setLoading(false);\r\n        \r\n        // Atualizar em background após 5 minutos do último carregamento\r\n        const lastUpdateTime = localStorage.getItem('securityLastUpdateTime');\r\n        if (lastUpdateTime) {\r\n          const timeSinceLastUpdate = Date.now() - parseInt(lastUpdateTime);\r\n          const fiveMinutesInMs = 5 * 60 * 1000;\r\n          \r\n          if (timeSinceLastUpdate > fiveMinutesInMs) {\r\n            // Atualiza em background se passou mais de 5 minutos\r\n            fetchSecurityIssuesInBackground();\r\n          }\r\n        }\r\n      } else {\r\n        // Se não tem cache ou a credencial mudou, buscar novos dados\r\n        fetchSecurityIssues();\r\n      }\r\n      \r\n      setLastCredentialId(selectedCredential.id);\r\n    } catch (error) {\r\n      console.error(\"Erro ao restaurar cache:\", error);\r\n      fetchSecurityIssues();\r\n    }\r\n  }, [selectedCredential]);\r\n  \r\n  // Função para atualizar dados em background\r\n  const fetchSecurityIssuesInBackground = async () => {\r\n    if (!selectedCredential) return;\r\n    \r\n    try {\r\n      setBackgroundLoading(true);\r\n      \r\n      // Buscar problemas de segurança reais\r\n      const response = await fetch(`/api/aws/resources?credentialId=${selectedCredential.id}`);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(\"Erro na atualização em background\");\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      // Processar os problemas de segurança\r\n      const issues = data.securityIssues || [];\r\n      \r\n      // Adicionar verificações simuladas para demonstração (manter consistência)\r\n      const demoChecks: SecurityCheck[] = [\r\n        {\r\n          id: \"sec-1\",\r\n          title: \"Acesso ao Root Account não protegido por MFA\",\r\n          description: \"A conta root AWS não tem autenticação multifator (MFA) habilitada\",\r\n          status: \"failed\",\r\n          resourceType: \"IAM\",\r\n          resourceId: \"root\",\r\n          impact: \"critical\",\r\n          recommendation: \"Ative a autenticação multifator (MFA) para a conta root da AWS\"\r\n        },\r\n        {\r\n          id: \"sec-2\",\r\n          title: \"Políticas IAM muito permissivas\",\r\n          description: \"Usuários com permissões administrativas ('*:*') completas\",\r\n          status: \"warning\",\r\n          resourceType: \"IAM\",\r\n          resourceId: \"policy/AdministratorAccess\",\r\n          impact: \"high\",\r\n          recommendation: \"Remova permissões excessivas e aplique o princípio de privilégio mínimo\"\r\n        },\r\n        {\r\n          id: \"sec-3\", \r\n          title: \"Rotação de chaves de acesso\",\r\n          description: \"Chaves de acesso não foram rotacionadas nos últimos 90 dias\",\r\n          status: \"warning\",\r\n          resourceType: \"IAM\",\r\n          resourceId: selectedCredential.id,\r\n          impact: \"medium\",\r\n          recommendation: \"Rotacione as chaves de acesso regularmente (a cada 90 dias)\"\r\n        }\r\n      ];\r\n      \r\n      // Mapear os problemas de segurança reais para o formato de verificação\r\n      const mappedIssues: SecurityCheck[] = issues.map((issue: any) => ({\r\n        id: `aws-${Math.random().toString(36).substring(7)}`,\r\n        title: issue.title,\r\n        description: issue.description,\r\n        status: issue.severity === \"CRITICAL\" || issue.severity === \"HIGH\" ? \"failed\" : \"warning\",\r\n        resourceType: issue.resourceType,\r\n        resourceId: issue.resourceId,\r\n        impact: issue.severity.toLowerCase(),\r\n        recommendation: issue.description.includes(\"público\") \r\n          ? \"Restrinja o acesso público e configure ACLs adequadas\" \r\n          : \"Revise as configurações de segurança deste recurso\"\r\n      }));\r\n      \r\n      // Combinar verificações demo com reais\r\n      const allChecks = [...demoChecks, ...mappedIssues];\r\n      \r\n      // Adicionar verificações passadas para demonstração\r\n      const passedChecks: SecurityCheck[] = [\r\n        {\r\n          id: \"sec-4\",\r\n          title: \"Registro de atividade CloudTrail\",\r\n          description: \"O CloudTrail está habilitado e configurado corretamente\",\r\n          status: \"passed\",\r\n          resourceType: \"CloudTrail\",\r\n          impact: \"high\",\r\n          recommendation: \"Continue monitorando os logs do CloudTrail regularmente\"\r\n        },\r\n        {\r\n          id: \"sec-5\",\r\n          title: \"Criptografia de volumes EBS\",\r\n          description: \"Os volumes EBS estão criptografados\",\r\n          status: \"passed\",\r\n          resourceType: \"EC2\",\r\n          impact: \"medium\",\r\n          recommendation: \"Mantenha a criptografia habilitada para todos os novos volumes\"\r\n        }\r\n      ];\r\n      \r\n      const finalChecks = [...allChecks, ...passedChecks];\r\n      setSecurityChecks(finalChecks);\r\n      \r\n      // Salvar no cache\r\n      localStorage.setItem('securityChecks', JSON.stringify(finalChecks));\r\n      localStorage.setItem('securityLastCredentialId', selectedCredential.id);\r\n      localStorage.setItem('securityLastUpdateTime', Date.now().toString());\r\n      \r\n      console.log(\"Atualização em background de verificações de segurança concluída\");\r\n    } catch (err) {\r\n      console.error(\"Erro na atualização em background:\", err);\r\n      // Não exibimos erros de background para o usuário\r\n    } finally {\r\n      setBackgroundLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchSecurityIssues = async () => {\r\n    if (!selectedCredential) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Simular um scan progressivo para UX melhor\r\n      setScanning(true);\r\n      setScanProgress(0);\r\n      \r\n      const scanTimer = setInterval(() => {\r\n        setScanProgress(prev => {\r\n          if (prev >= 95) {\r\n            clearInterval(scanTimer);\r\n            return 95;\r\n          }\r\n          return prev + Math.floor(Math.random() * 5) + 1;\r\n        });\r\n      }, 300);\r\n      \r\n      // Buscar problemas de segurança reais\r\n      const response = await fetch(`/api/aws/resources?credentialId=${selectedCredential.id}`);\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || \"Erro ao buscar problemas de segurança\");\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      // Processar os problemas de segurança\r\n      const issues = data.securityIssues || [];\r\n      \r\n      // Adicionar algumas verificações simuladas para demonstração\r\n      const demoChecks: SecurityCheck[] = [\r\n        {\r\n          id: \"sec-1\",\r\n          title: \"Acesso ao Root Account não protegido por MFA\",\r\n          description: \"A conta root AWS não tem autenticação multifator (MFA) habilitada\",\r\n          status: \"failed\",\r\n          resourceType: \"IAM\",\r\n          resourceId: \"root\",\r\n          impact: \"critical\",\r\n          recommendation: \"Ative a autenticação multifator (MFA) para a conta root da AWS\"\r\n        },\r\n        {\r\n          id: \"sec-2\",\r\n          title: \"Políticas IAM muito permissivas\",\r\n          description: \"Usuários com permissões administrativas ('*:*') completas\",\r\n          status: \"warning\",\r\n          resourceType: \"IAM\",\r\n          resourceId: \"policy/AdministratorAccess\",\r\n          impact: \"high\",\r\n          recommendation: \"Remova permissões excessivas e aplique o princípio de privilégio mínimo\"\r\n        },\r\n        {\r\n          id: \"sec-3\", \r\n          title: \"Rotação de chaves de acesso\",\r\n          description: \"Chaves de acesso não foram rotacionadas nos últimos 90 dias\",\r\n          status: \"warning\",\r\n          resourceType: \"IAM\",\r\n          resourceId: selectedCredential.id,\r\n          impact: \"medium\",\r\n          recommendation: \"Rotacione as chaves de acesso regularmente (a cada 90 dias)\"\r\n        }\r\n      ];\r\n      \r\n      // Mapear os problemas de segurança reais para o formato de verificação\r\n      const mappedIssues: SecurityCheck[] = issues.map((issue: any) => ({\r\n        id: `aws-${Math.random().toString(36).substring(7)}`,\r\n        title: issue.title,\r\n        description: issue.description,\r\n        status: issue.severity === \"CRITICAL\" || issue.severity === \"HIGH\" ? \"failed\" : \"warning\",\r\n        resourceType: issue.resourceType,\r\n        resourceId: issue.resourceId,\r\n        impact: issue.severity.toLowerCase(),\r\n        recommendation: issue.description.includes(\"público\") \r\n          ? \"Restrinja o acesso público e configure ACLs adequadas\" \r\n          : \"Revise as configurações de segurança deste recurso\"\r\n      }));\r\n      \r\n      // Combinar verificações demo com reais\r\n      const allChecks = [...demoChecks, ...mappedIssues];\r\n      \r\n      // Adicionar verificações passadas para demonstração\r\n      const passedChecks: SecurityCheck[] = [\r\n        {\r\n          id: \"sec-4\",\r\n          title: \"Registro de atividade CloudTrail\",\r\n          description: \"O CloudTrail está habilitado e configurado corretamente\",\r\n          status: \"passed\",\r\n          resourceType: \"CloudTrail\",\r\n          impact: \"high\",\r\n          recommendation: \"Continue monitorando os logs do CloudTrail regularmente\"\r\n        },\r\n        {\r\n          id: \"sec-5\",\r\n          title: \"Criptografia de volumes EBS\",\r\n          description: \"Os volumes EBS estão criptografados\",\r\n          status: \"passed\",\r\n          resourceType: \"EC2\",\r\n          impact: \"medium\",\r\n          recommendation: \"Mantenha a criptografia habilitada para todos os novos volumes\"\r\n        }\r\n      ];\r\n      \r\n      // Atrasar um pouco para simular o processamento\r\n      setTimeout(() => {\r\n        const finalChecks = [...allChecks, ...passedChecks];\r\n        setSecurityChecks(finalChecks);\r\n        setScanning(false);\r\n        setScanProgress(100);\r\n        setLoading(false);\r\n        \r\n        // Salvar no cache\r\n        localStorage.setItem('securityChecks', JSON.stringify(finalChecks));\r\n        localStorage.setItem('securityLastCredentialId', selectedCredential.id);\r\n        localStorage.setItem('securityLastUpdateTime', Date.now().toString());\r\n      }, 2000);\r\n      \r\n      clearInterval(scanTimer);\r\n    } catch (err) {\r\n      console.error(\"Erro ao buscar problemas de segurança:\", err);\r\n      setError(err instanceof Error ? err.message : \"Erro ao buscar problemas de segurança\");\r\n      setScanning(false);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const runNewScan = () => {\r\n    fetchSecurityIssues();\r\n  };\r\n\r\n  // Filtrar verificações\r\n  const filteredChecks = securityChecks.filter(check => {\r\n    if (filterStatus && check.status !== filterStatus) return false;\r\n    if (filterImpact && check.impact !== filterImpact) return false;\r\n    return true;\r\n  });\r\n\r\n  // Contadores para resumo\r\n  const criticalCount = securityChecks.filter(c => c.impact === \"critical\").length;\r\n  const highCount = securityChecks.filter(c => c.impact === \"high\").length;\r\n  const mediumCount = securityChecks.filter(c => c.impact === \"medium\").length;\r\n  const lowCount = securityChecks.filter(c => c.impact === \"low\").length;\r\n  const passedCount = securityChecks.filter(c => c.status === \"passed\").length;\r\n  const failedCount = securityChecks.filter(c => c.status === \"failed\").length;\r\n  const warningCount = securityChecks.filter(c => c.status === \"warning\").length;\r\n\r\n  // Helper para cores\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"passed\": return \"bg-green-100 text-green-800\";\r\n      case \"failed\": return \"bg-red-100 text-red-800\";\r\n      case \"warning\": return \"bg-yellow-100 text-yellow-800\";\r\n      case \"info\": return \"bg-blue-100 text-blue-800\";\r\n      default: return \"bg-gray-100 text-gray-800\";\r\n    }\r\n  };\r\n  \r\n  const getImpactColor = (impact: string) => {\r\n    switch (impact) {\r\n      case \"critical\": return \"bg-red-100 text-red-800\";\r\n      case \"high\": return \"bg-orange-100 text-orange-800\";\r\n      case \"medium\": return \"bg-yellow-100 text-yellow-800\";\r\n      case \"low\": return \"bg-blue-100 text-blue-800\";\r\n      default: return \"bg-gray-100 text-gray-800\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <motion.div\r\n        className=\"mb-6\"\r\n        initial={{ opacity: 0, y: -20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.3 }}\r\n      >\r\n        <div className=\"flex items-center gap-2 mb-2\">\r\n          <Shield className=\"h-6 w-6 text-indigo-600\" />\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Análise de Segurança</h1>\r\n        </div>\r\n        <p className=\"mt-2 text-gray-600\">\r\n          Identifique e corrija vulnerabilidades e configurações incorretas nos seus recursos AWS.\r\n        </p>\r\n      </motion.div>\r\n\r\n      <CredentialSelector />\r\n\r\n      {!selectedCredential ? (\r\n        <motion.div\r\n          className=\"bg-white rounded-lg shadow-md p-6 text-center\"\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          <p className=\"text-gray-500 mb-4\">Selecione uma credencial AWS para começar a análise de segurança.</p>\r\n        </motion.div>\r\n      ) : (\r\n        <>\r\n          {/* Painel de controle e resumo */}\r\n          <motion.div\r\n            className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            {/* Cartão de status */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-4\">\r\n              <div className=\"flex justify-between items-center mb-3\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Status</h3>\r\n                {backgroundLoading && (\r\n                  <div className=\"flex items-center text-xs text-gray-500\">\r\n                    <div className=\"animate-spin h-3 w-3 border-t-2 border-b-2 border-indigo-500 mr-1\"></div>\r\n                    Atualizando...\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Aprovados</span>\r\n                  <span className=\"text-sm font-medium text-green-600\">{passedCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Falhas</span>\r\n                  <span className=\"text-sm font-medium text-red-600\">{failedCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Avisos</span>\r\n                  <span className=\"text-sm font-medium text-yellow-600\">{warningCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Total</span>\r\n                  <span className=\"text-sm font-medium\">{securityChecks.length}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Cartão de severidade */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-4\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-3\">Severidade</h3>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Crítica</span>\r\n                  <span className=\"text-sm font-medium text-red-600\">{criticalCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Alta</span>\r\n                  <span className=\"text-sm font-medium text-orange-600\">{highCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Média</span>\r\n                  <span className=\"text-sm font-medium text-yellow-600\">{mediumCount}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Baixa</span>\r\n                  <span className=\"text-sm font-medium text-blue-600\">{lowCount}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Cartão de ações */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-4\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-3\">Ações</h3>\r\n              <div className=\"space-y-3\">\r\n                <button\r\n                  onClick={runNewScan}\r\n                  disabled={scanning}\r\n                  className=\"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50\"\r\n                >\r\n                  {scanning ? (\r\n                    <>\r\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                      </svg>\r\n                      Escaneando... {scanProgress}%\r\n                    </>\r\n                  ) : (\r\n                    \"Iniciar Nova Verificação\"\r\n                  )}\r\n                </button>\r\n                <button\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                >\r\n                  Exportar Relatório\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n          \r\n          {/* Filtros e lista de verificações */}\r\n          <motion.div\r\n            className=\"bg-white rounded-lg shadow-md overflow-hidden\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.3, delay: 0.1 }}\r\n          >\r\n            {/* Filtros */}\r\n            <div className=\"border-b border-gray-200 bg-gray-50 p-4 flex flex-wrap gap-4\">\r\n              <div>\r\n                <label htmlFor=\"filter-status\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Status\r\n                </label>\r\n                <select\r\n                  id=\"filter-status\"\r\n                  value={filterStatus || \"\"}\r\n                  onChange={(e) => setFilterStatus(e.target.value || null)}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                >\r\n                  <option value=\"\">Todos</option>\r\n                  <option value=\"passed\">Aprovado</option>\r\n                  <option value=\"failed\">Falha</option>\r\n                  <option value=\"warning\">Aviso</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"filter-impact\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Severidade\r\n                </label>\r\n                <select\r\n                  id=\"filter-impact\"\r\n                  value={filterImpact || \"\"}\r\n                  onChange={(e) => setFilterImpact(e.target.value || null)}\r\n                  className=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                >\r\n                  <option value=\"\">Todas</option>\r\n                  <option value=\"critical\">Crítica</option>\r\n                  <option value=\"high\">Alta</option>\r\n                  <option value=\"medium\">Média</option>\r\n                  <option value=\"low\">Baixa</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Lista de verificações */}\r\n            <div className=\"divide-y divide-gray-200\">\r\n              {loading ? (\r\n                <div className=\"p-6 text-center\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4\"></div>\r\n                  <p className=\"text-gray-500\">Carregando verificações de segurança...</p>\r\n                </div>\r\n              ) : error ? (\r\n                <div className=\"p-6 text-center\">\r\n                  <div className=\"p-4 bg-red-50 rounded-md\">\r\n                    <p className=\"text-red-700\">{error}</p>\r\n                  </div>\r\n                </div>\r\n              ) : filteredChecks.length === 0 ? (\r\n                <div className=\"p-6 text-center\">\r\n                  <p className=\"text-gray-500\">Nenhuma verificação encontrada com os filtros atuais.</p>\r\n                </div>\r\n              ) : (\r\n                filteredChecks.map((check) => (\r\n                  <div key={check.id} className=\"p-4 hover:bg-gray-50\">\r\n                    <div className=\"flex items-start\">\r\n                      {/* Indicador de status */}\r\n                      <div className={`w-2 h-2 mt-2 rounded-full ${\r\n                        check.status === 'passed' ? 'bg-green-500' : \r\n                        check.status === 'failed' ? 'bg-red-500' : \r\n                        check.status === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'\r\n                      } mr-4`}></div>\r\n                      \r\n                      {/* Conteúdo principal */}\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex justify-between mb-2\">\r\n                          <h4 className=\"text-base font-medium text-gray-900\">{check.title}</h4>\r\n                          <div className=\"flex space-x-2\">\r\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(check.status)}`}>\r\n                              {check.status === 'passed' ? 'Aprovado' : \r\n                               check.status === 'failed' ? 'Falha' : \r\n                               check.status === 'warning' ? 'Aviso' : 'Info'}\r\n                            </span>\r\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getImpactColor(check.impact)}`}>\r\n                              {check.impact === 'critical' ? 'Crítica' : \r\n                               check.impact === 'high' ? 'Alta' : \r\n                               check.impact === 'medium' ? 'Média' : 'Baixa'}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <p className=\"text-sm text-gray-500 mb-2\">{check.description}</p>\r\n                        \r\n                        <div className=\"mb-2\">\r\n                          <span className=\"text-xs font-medium text-gray-500\">Recurso: </span>\r\n                          <span className=\"text-xs text-gray-700\">{check.resourceType}{check.resourceId ? ` (${check.resourceId})` : ''}</span>\r\n                        </div>\r\n                        \r\n                        {check.status !== 'passed' && (\r\n                          <div className=\"mt-3 p-3 bg-blue-50 rounded-md\">\r\n                            <h5 className=\"text-xs font-medium text-blue-800 mb-1\">Recomendação:</h5>\r\n                            <p className=\"text-sm text-blue-700\">{check.recommendation}</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}